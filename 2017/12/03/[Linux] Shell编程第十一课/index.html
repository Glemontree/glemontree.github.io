<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    

    <title>[Linux] Shell编程第十一课 | day day up!</title>
    <meta name="author" content="Glemontree">
    
    <meta name="description" content="记录我学习的每一步">
    
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta property="og:title" content="[Linux] Shell编程第十一课"/>
    <meta property="og:site_name" content="Glemontree&#39;s blog"/>

    
    <meta property="og:image" content="undefined"/>
    

    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="alternate" href="/atom.xml" title="Glemontree&#39;s blog" type="application/atom+xml">
    <link rel="stylesheet" href="/css/lib/materialize.min.css">
    <link rel="stylesheet" href="/css/lib/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

    
        <link rel="stylesheet" href="/css/lib/prettify-tomorrow-night-eighties.css" type="text/css">
    
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>


<body>
    <img src="/weixin_favicon.png" style="position: absolute; left: -9999px; opacity: 0; filter: alpha(opacity=0);">

    <nav class="indigo">
    <div class="nav-wrapper">
        <a href="#" data-activates="main-menu" class="button-collapse">
            <i class="fa fa-navicon"></i>
        </a>
        <div class="">
            <a href="/" class="brand-logo hide-on-med-and-down">Glemontree&#39;s blog</a>
            <ul class="right hide-on-med-and-down">
                
                    <li>
                        <a class="menu-home " href="/" >
                            <i class="fa fa-home "></i>
                            
                            首页
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-archive " href="/archives" >
                            <i class="fa fa-archive "></i>
                            
                            归档
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-category category-menu" href="javascript:;" data-activates="category-menu" >
                            <i class="fa fa-bookmark "></i>
                            
                            分类
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-reading " href="/reading" >
                            <i class="fa fa-book "></i>
                            
                            读书
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-about " href="/about" >
                            <i class="fa fa-user "></i>
                            
                            关于
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-search modal-trigger " href="#search" >
                            <i class="fa fa-search "></i>
                            
                            搜索
                        </a>
                    </li>
                
            </ul>
            <div>
    <ul class="side-nav indigo darken-1" id="main-menu">
        
        <li class="side-user">
            <div class="row">
                <div class="col s4 no-padding">
                    <img class="avatar-image circle responsive-img" src="http://a2.qpic.cn/psb?/7f08dc85-11f9-4e2c-98bf-46f57deaea51/y3454JNrI*wKHx2Q4UGOkYW5ceOFrz5b1VKCL6GAt7A!/m/dDEBAAAAAAAAnull&amp;bo=hAOEAwAAAAARBzA!&amp;rf=photolist&amp;t=5" alt="User Avatar">
                </div>
                <div class="info col s8 valign-wrapper no-padding">
                    <div class="valign">
                        <p class="name">Glemontree</p>
                        <p class="desc">Java后端/Android/C++/Linux/技术宅</p>
                    </div>
                </div>
            </div>
        </li>
        

        
            <li class="no-padding">
                <a class="waves-effect menu-home " href="/" >
                    <i class="fa fa-home "></i>
                    
                    首页
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-archive " href="/archives" >
                    <i class="fa fa-archive "></i>
                    
                    归档
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-category category-menu" href="javascript:;" data-activates="category-menu" >
                    <i class="fa fa-bookmark "></i>
                    
                    分类
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-reading " href="/reading" >
                    <i class="fa fa-book "></i>
                    
                    读书
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-about " href="/about" >
                    <i class="fa fa-user "></i>
                    
                    关于
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-search modal-trigger " href="#search" >
                    <i class="fa fa-search "></i>
                    
                    搜索
                </a>
            </li>
        
    </ul>

    <ul class="side-nav indigo darken-1" id="category-menu">
    

            

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Android/">
                    Android <span class="right">15 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/C/">
                    C <span class="right">24 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Boost/">
                    Boost <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/CMake/">
                    CMake <span class="right">2 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/DB/">
                    DB <span class="right">7 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Effective-Java/">
                    Effective-Java <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/HTTPS/">
                    HTTPS <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Hexo/">
                    Hexo <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/IntelliJ-IDEA/">
                    IntelliJ-IDEA <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/JQuery/">
                    JQuery <span class="right">8 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Java/">
                    Java <span class="right">16 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Linux/">
                    Linux <span class="right">22 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/MyBatis/">
                    MyBatis <span class="right">8 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Qt/">
                    Qt <span class="right">4 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Redis/">
                    Redis <span class="right">3 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Servlet/">
                    Servlet <span class="right">3 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/SpringMVC/">
                    SpringMVC <span class="right">4 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Spring/">
                    Spring <span class="right">5 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Struts2/">
                    Struts2 <span class="right">18 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/TCP-IP/">
                    TCP-IP <span class="right">9 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/TCPIP/">
                    TCPIP <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Windows核心编程/">
                    Windows核心编程 <span class="right">2 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/html/">
                    html <span class="right">7 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/多线程/">
                    多线程 <span class="right">3 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/算法/">
                    算法 <span class="right">3 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/编程规范/">
                    编程规范 <span class="right">1 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/网络编程/">
                    网络编程 <span class="right">2 篇</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/设计模式/">
                    设计模式 <span class="right">5 篇</span></a>
                </a>
            </li>

        

    </ul>
</div>

        </div>
    </div>
</nav>

<div id="search" class="modal search-modal">
    <div class="row">
        <div class="input-field col s12">
              <input id="search-input" type="text">
              <label for="search-input">搜索</label>
        </div>

    </div>
    <div id="search-result" class="search-result col s12">

    </div>
</div>


    <main>
        <div class="container main-container">
    <nav class="page-nav hide-on-small-only">
    <div class="nav-wrapper indigo">
        <span class="breadcrumb">当前位置（分类目录）</span>
        
            

        

        
    </div>
</nav>

<article>
    <div class="card">
        <div class="card-content">
            

            <div class="article-title">
                
    
        <h1>[Linux] Shell编程第十一课</h1>
    


            </div>
            <time class="pink-link-context" datetime="2017-12-03T12:18:59.000Z"><a href="/2017/12/03/[Linux] Shell编程第十一课/">2017-12-03</a></time>

            <span id="busuanzi_container_page_pv" class="read-times-container">
    <i class="fa fa-eye"></i>
    <span id="busuanzi_value_page_pv"></span>
</span>

            

            <div class="toc pink-link-context hide-on-med-and-down">
    
</div>


            <div class="entry pink-link-context">
                <ul>
<li><p>bash shell会将一些称为位置参数的特殊变量分配给输入到命令行中的所有参数，其中<code>$0</code>是程序名，<code>$1</code>是第一个参数，<code>$2</code>是第二个参数…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">factorial=1</div><div class="line">for (( number = 1; number &lt;= $1 ; number++ ))</div><div class="line">do</div><div class="line">   factorial=[ factorial * $number ]</div><div class="line">done</div><div class="line">echo The factorial of 1 is factorial</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ ./test1.sh 5</div><div class="line">The factorial of 5 is 120</div></pre></td></tr></table></figure>
<p>需要注意的是<code>factorial=$[ $factorial * $number ]</code>这一行等号左右不可以有空格。</p>
</li>
</ul>
<ul>
<li>在将文本字符串作为参数传递时，若碰到有空格的文本字符串，需要用引号将文本字符串包起来</li>
</ul>
<ul>
<li><p>读取脚本名：可以用<code>$0</code>参数获取shell在命令行启动的脚本名，例如bash test.sh，那么在shell脚本中使用<code>$0</code>获取到的脚本名为test.sh，但是有一个问题就是使用<code>./test.sh</code>运行程序时，命令会和脚本名混在一起，例如执行<code>./test.sh</code>，那么在脚本中<code>$0</code>获取到的脚本名为<code>./test.sh</code>，另外一个问题就是当传给<code>$0</code>变量的实际字符串不仅仅是脚本名，而是完整的脚本路径时，变量<code>$0</code>就是使用整个路径，例如<code>bash /home/gtp/test.sh</code>，那么在脚本中获取的值就为<code>/home/gtp/test.sh</code>，有个命令可以帮我们提取出脚本名称，basename命令会返回不包含路径的脚本名，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">name=(basename 0)</div><div class="line">if [ $name = &quot;addem&quot; ]</div><div class="line">then</div><div class="line">	total=$[ $1 + $2 ]</div><div class="line">elif [ $name = &quot;multem&quot; ]</div><div class="line">then </div><div class="line">	total=$[ $1 * $2 ]</div><div class="line">fi</div></pre></td></tr></table></figure>
</li>
<li><p>​在shell脚本中使用命令行参数如果脚本不加参数运行会报错，所以在脚本中使用命令行参数时一定要先判断：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">if [ -n &quot;$1&quot; ]</div><div class="line">then</div><div class="line">   echo Hello $1, glad to meet you.</div><div class="line">else</div><div class="line">   echo &quot;Sorry, you did not identify yourself&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
</li>
<li><p>特殊变量<code>$#</code>含有脚本运行时携带的命令行参数的个数，可以在脚本中任何地方使用这个特殊变量，就跟普通变量一样，我们通过如下形式获取到最后一个命令行参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">params=$#</div><div class="line">echo</div><div class="line">echo The last parameter is $params</div><div class="line">echo The last parameter is $&#123;!#&#125; </div><div class="line">echo</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ bash test.sh 1 2 3 4 5</div><div class="line">The last parameter is 5</div><div class="line">The last parameter is 5</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ bash test.sh </div><div class="line">The last parameter is 0</div><div class="line">The last parameter is test.sh</div></pre></td></tr></table></figure>
</li>
<li><p><code>$*</code>和<code>$@</code>变量可以轻松访问所有的命令行参数，这两个变量都能够在单个变量上存储所有的命令行参数，<code>$*</code>变量会将命令行上提供的所有参数当作一个单词保存，这个单词包含了命令行上出现的每一个参数值，<code>$*</code>变量会将这些参数视为一个整体，而不是多个个体；而<code>$@</code>变量会将命令行上提供的所有参数当作同一字符串中的多个独立的单词，这样就能遍历所有的参数值，得到每一个参数值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">echo</div><div class="line">count=1</div><div class="line">for param in &quot;$*&quot;</div><div class="line">do</div><div class="line">   echo &quot;$* Parameter #count = param&quot;</div><div class="line">   count=[ count + 1 ]</div><div class="line">done</div><div class="line">echo</div><div class="line">count=1</div><div class="line">for param in &quot;$@&quot;</div><div class="line">do</div><div class="line">   echo &quot;$@ Paramter #count = param&quot;</div><div class="line">   count=[ count + 1]</div><div class="line">done</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ ./test.sh rich barbara katie jessica</div><div class="line">$* Parameter #1 = rich barbara katie jessica</div><div class="line">$@ Parameter #1 = rich</div><div class="line">$@ Parameter #2 = barbara</div><div class="line">$@ Parameter #3 = katie</div><div class="line">$@ Parameter #4 = jessica</div></pre></td></tr></table></figure>
</li>
<li><p>移动变量：shift命令能够用来操作命令行参数，shift命令会根据它们的相对位置来移动命令行参数，在使用shift命令时，默认情况下它会将每个参数变量向左移动一个位置，所以,变量<code>$3</code>的值会移到<code>$2</code>中,变量<code>$2</code>的值会移到<code>$1</code>中,而变量<code>$1</code>的值则会被删除(注意,变量<code>$0</code>的值,也就是程序名,不会改变)。这是遍历命令行参数的另一种方法，你可以只操作第一个参数，移动参数，然后继续操作第一个参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">echo</div><div class="line">count=1</div><div class="line">while [ -n &quot;$1&quot; ]</div><div class="line">do</div><div class="line">	echo &quot;Parameter #$count = $1&quot;</div><div class="line">    count=$[ $count + 1 ]</div><div class="line">    shift</div><div class="line">done</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$</div><div class="line">$ ./test13.sh rich barbara katie jessica</div><div class="line">Parameter #1 = rich</div><div class="line">Parameter #2 = barbara</div><div class="line">Parameter #3 = katie</div><div class="line">Parameter #4 = jessica</div></pre></td></tr></table></figure>
<p>使用shift命令需要注意的是如果某个参数被移出，它的值就被丢弃了，无法再恢复。</p>
</li>
</ul>
<ul>
<li><p>你可以使用shift命令来依次处理脚本程序携带的命令行参数，你也可以用同样的方法来处理命令行选项，在提取每个单独参数时，用case语句来判断某个参数是否为选项：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">echo</div><div class="line">while [ -n &quot;$1&quot; ]</div><div class="line">do </div><div class="line">  	case &quot;$1&quot; in </div><div class="line">		-a) echo &quot;Found the -a option&quot; ;;</div><div class="line">      	-b) echo &quot;Found the -a option&quot; ;;</div><div class="line">      	-c) echo &quot;Found the -c option&quot; ;;</div><div class="line">       	*) echo &quot;$1 is not an option&quot; ;;</div><div class="line">    esac</div><div class="line">    shift</div><div class="line">done</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ ./test.sh -a -b -c -d</div><div class="line">Found the -a option</div><div class="line">Found the -b option</div><div class="line">Found the -c option</div><div class="line">-d is not an option</div></pre></td></tr></table></figure>
</li>
<li><p>Linux中使用<code>--</code>特殊字符将选项和参数分开，shell会用双破折线来表明选项列表结束，在双破折线之后，脚本就可以放心的将剩下的命令行参数当作参数，而不是选项来处理了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">echo </div><div class="line">while [ -n &quot;$1&quot; ]</div><div class="line">do </div><div class="line">	case &quot;$1&quot; in</div><div class="line">		-a) echo &quot;Found the -a option&quot; ;;</div><div class="line">        -b) echo &quot;Found the -b option&quot; ;;</div><div class="line">        -c) echo &quot;Found the -c option&quot; ;;</div><div class="line">        --) shift</div><div class="line">            break ;;</div><div class="line">         *) echo &quot;$1 is not an option&quot; ;;</div><div class="line">    esac</div><div class="line">    shift</div><div class="line">done</div><div class="line">#</div><div class="line">count=1</div><div class="line">for param in $@</div><div class="line">do</div><div class="line">	echo &quot;Parameter #$count: $param&quot;</div><div class="line">    count=$[ $count + 1 ]</div><div class="line">done</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> $ ./test16.sh -c -a -b -- test1 test2 test3</div><div class="line">Found the -c option</div><div class="line">Found the -a option</div><div class="line">Found the -b option</div><div class="line">Parameter #1: test1</div><div class="line">Parameter #2: test2</div><div class="line">Parameter #3: test3</div></pre></td></tr></table></figure>
</li>
<li><p>处理带值的选项：有些选项会带上一个额外的参数值，在这种情况下，命令行会类似于下面这种形式：<code>./test.sh -a -b test1 -c -d test2</code>，当命令行选项要求额外的参数时，脚本必须能够检测到并正确处理：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">echo</div><div class="line">while [ -n &quot;$1&quot; ]</div><div class="line">do</div><div class="line">    case &quot;$1&quot; in </div><div class="line">        -a) echo &quot;Found the -a option&quot;</div><div class="line">        -b) param=&quot;$2&quot;</div><div class="line">            echo &quot;Found the -b option, with parameter value $param&quot;</div><div class="line">            shift ;;</div><div class="line">        -c) echo &quot;Found the -c option&quot; ;;</div><div class="line">        --) shift</div><div class="line">            break ;;</div><div class="line">         *) echo &quot;$1 is not an option&quot;</div><div class="line">    esac</div><div class="line">    shift</div><div class="line">done</div><div class="line">#</div><div class="line">count=1</div><div class="line">for param in $@</div><div class="line">do</div><div class="line">    echo &quot;Parameter #$count: $param&quot;</div><div class="line">    count=$[ $count + 1 ]</div><div class="line">done</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ ./test.sh -a -b test1 -d</div><div class="line">Found the -a option</div><div class="line">Found the -b option, with parameter value test1</div><div class="line">-d is not an option</div></pre></td></tr></table></figure>
</li>
<li><p>getopt命令是一个处理命令行选项和参数的命令，它能够识别命令行参数，getopt命令可以接受一系列任意形式的命令行选项和参数，并自动将它们转换成适当的形式，它的命令形式如下：<code>getopt optstring parameters</code>。</p>
<p>optstring定义了命令行有效的选项字母，还定义了哪些选项字母需要参数值，在optstring中列出你要在脚本中用到的每个命令行选项字母，然后在每个需要参数值的选项字母后加一个冒号，getopt命令会基于你定义的optstring解析提供的参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ getopt ab:cd -a -b test1 -cd test2 test3</div><div class="line">a -b test1 -c -d -- test2 test3</div></pre></td></tr></table></figure>
<p>optstring定义了四个有效选项字母，a、b、c和d，冒号被放在了b后面，表示b选项需要一个参数值，当getopt命令运行时，它会检查提供的参数列表（<code>-a -b test1 -cd test2 test3</code>），并基于提供的optstring进行解析，它会自动将<code>-cd</code>选项分为两个独立的选项，并插入双破折线来分隔行中的额外参数。</p>
</li>
</ul>
<ul>
<li><p>可以在脚本中使用getopt来格式化脚本所携带的任何命令行选项和参数，方法是用getopt命令生成的格式化后的版本来替换已有的命令行选项和参数，这可以通过set命令做到，set命令的选项之一是双破折线<code>--</code>，它会将命令行参数替换成set命令的命令行值：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">set -- $(getopt -q ab:cd &quot;$@&quot;)</div></pre></td></tr></table></figure>
<p><code>-q</code>选项表示如果指定了一个不在optstring中的选项，默认情况下，getopt命令会产生一条错误信息，指定了<code>-q</code>选项后就可以忽略这条错误信息。</p>
<p>现在原始的命令行参数变量的值会被getopt命令的输出替换：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">#Extract command line options &amp; values with getopt</div><div class="line">#</div><div class="line">set -- $(getopt -q ab:cd &quot;$@&quot;)</div><div class="line">#</div><div class="line">echo</div><div class="line">while [ -n &quot;$1&quot; ]</div><div class="line">do</div><div class="line">    case &quot;$1&quot; in</div><div class="line">        -a) echo &quot;Found the -a option&quot; ;;</div><div class="line">        -b) param=&quot;$2&quot;</div><div class="line">            echo &quot;Found the -b option, with parameter value $param&quot;</div><div class="line">            shift ;;</div><div class="line">        -c) echo &quot;Found the -c option&quot; ;;</div><div class="line">        --) shift</div><div class="line">            break ;;</div><div class="line">         *) echo &quot;$1 is not an option&quot;;;</div><div class="line">    esac</div><div class="line">    shift</div><div class="line">done</div><div class="line">#</div><div class="line">count=1</div><div class="line">for param in &quot;$@&quot; </div><div class="line">do</div><div class="line">    echo &quot;Parameter #$count: $param&quot;</div><div class="line">    count=$[ $count + 1 ]</div><div class="line">done</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ ./test.sh -ac</div><div class="line">Found the -a option</div><div class="line">Found the -c option</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ ./test.sh -a -b test1 -cd test2 test3 test4</div><div class="line">Found the -a option</div><div class="line">Found the -b option, with parameter value &apos;test1&apos;</div><div class="line">Found the -c option</div><div class="line">Parameter #1: &apos;test2&apos;</div><div class="line">Parameter #2: &apos;test3&apos;</div><div class="line">Parameter #3: &apos;test4&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>getopt存在的一个问题就是当处理带空格和引号的参数值时，它会将空格当作参数分隔符，而不是根据双引号将二者当作一个参数，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./test.sh -a -b test1 -cd &quot;test2 test3&quot; test4</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Found the -a option</div><div class="line">Found the -b option, with parameter value &apos;test1&apos;</div><div class="line">Found the -c option</div><div class="line">Parameter #1: &apos;test2</div><div class="line">Parameter #2: test3&apos;</div><div class="line">Parameter #3: &apos;test4&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>getopts一次只处理命令行上检测到的一个参数，处理完所有的参数后，它会退出并返回一个大于0的退出状态码，这让它非常适合用解析命令行所有参数的循环中： <code>getopts optstring variable</code></p>
<p>有效的选项字母都会列在optstring中，如果选项字母要求有个参数值，就加一个冒号，要去掉错误信息的话，可以在optstring之前加一个冒号，getopts命令会将当前参数保存在命令行中定义的variable中。</p>
<p>getopts命令会用到两个环境变量，如果选项要跟一个参数值，OPTARG环境变量就会保存这个值，OPTIND环境变量保存了参数列表中getopts正在处理的参数位置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">echo</div><div class="line">while getopts :ab:c opt</div><div class="line">do</div><div class="line">    case &quot;$opt&quot; in </div><div class="line">         a) echo &quot;Found the -a option&quot; ;;</div><div class="line">         b) echo &quot;Found the -b option, with value $OPTARG&quot; ;;</div><div class="line">         a) echo &quot;Found the -c option&quot; ;;</div><div class="line">         *) echo &quot;Unknown option: $opt&quot; ;;</div><div class="line">    esac</div><div class="line">done</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ ./test19.sh -ab test1 -c</div><div class="line">Found the -a option</div><div class="line">Found the -b option, with value test1</div><div class="line">Found the -c option</div></pre></td></tr></table></figure>
<p>需要注意的是，getopts命令解析命令行选项时会移除开头的破折线，所以在case定义中不用单破折线。</p>
</li>
</ul>
<ul>
<li><p>getopts可以在参数中包含空格：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./test.sh -b &quot;test1 test2&quot; -a</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Found the -b option, with value test1 test2</div><div class="line">Found the -a option</div></pre></td></tr></table></figure>
</li>
<li><p>选项字母和参数值放在一起使用,而不用加空格</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./test.sh -abtest1</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Found the -a option</div><div class="line">Found the -b option, with value test1</div></pre></td></tr></table></figure>
</li>
<li><p>getopts还能够将命令行上找到的所有未定义的选项统一输出成问号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./test19.sh -d</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Unknown option: ?</div></pre></td></tr></table></figure>
</li>
<li><p>在getopts处理每个选项时,它会将OPTIND环境变量值增一。在getopts完成处理时,你可以使用shift命令和OPTIND值来移动参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">echo</div><div class="line">while getopts :ab:cd opt</div><div class="line">do</div><div class="line">    case &quot;$opt&quot; in</div><div class="line">        a) echo &quot;Found the -a option&quot; ;;</div><div class="line">        b) echo &quot;Found the -b option, with value $OPTARG;;</div><div class="line">        c) echo &quot;Found the -c option&quot; ;;</div><div class="line">        d) echo &quot;Found the -d option&quot; ;;  </div><div class="line">        *) echo &quot;Unknown option: $opt&quot; ;; </div><div class="line">    esac</div><div class="line">done</div><div class="line">#</div><div class="line">shift $[ OPTIND - 1 ]</div><div class="line">#</div><div class="line">echo</div><div class="line">count=1</div><div class="line">for param in &quot;$@&quot;</div><div class="line">do</div><div class="line">    echo &quot;Parameter $count: $param&quot;</div><div class="line">    count=$[ $count + 1 ]</div><div class="line">done</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ ./test.sh -a -b test1 -d test2 test3 test4</div><div class="line">Found the -a option </div><div class="line">Found the -b option, with value test1 </div><div class="line">Found the -d option </div><div class="line"></div><div class="line">Parameter 1: test2 </div><div class="line">Parameter 2: test3 </div><div class="line">Parameter 3: test4</div></pre></td></tr></table></figure>
<p>注意：OPTIND总是存储下一个要处理的元素位置，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">echo</div><div class="line">while getopts :ab:cd opt</div><div class="line">do</div><div class="line">    case &quot;$opt&quot; in</div><div class="line">        a) echo &quot;a = $OPTIND&quot; ;;</div><div class="line">        b) echo &quot;b = $OPTIND&quot; ;;</div><div class="line">        c) echo &quot;c = $OPTIND&quot; ;;</div><div class="line">        d) echo &quot;d = $OPTIND&quot; ;;</div><div class="line">    esac</div><div class="line">done</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ ./test.sh -a -b test1 -c -d</div><div class="line">a = 2</div><div class="line">b = 4</div><div class="line">c = 5</div><div class="line">d = 6</div></pre></td></tr></table></figure>
<p>之所以会有上述输出是因为当处理命令行参数<code>-a</code>时，下一个要处理的参数是<code>-b</code>，而<code>-b</code>参数所在的位置为2，所以a = 2，当处理<code>-b</code>时，下一个参数是test1，但test1不是命令行选项，所以跳过，因此下一个要处理的参数是<code>-c</code>，而<code>-c</code>参数所在的位置为4,后面几个输出的道理是一样的。</p>
<p>我们看另外一种情况：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ ./test.sh -ab test1 -c -d</div><div class="line">a = 1</div><div class="line">b = 3</div><div class="line">c = 4</div><div class="line">d = 5</div></pre></td></tr></table></figure>
<p>之所以会有上述输出是因为当成处理命令行参数<code>-a</code>时，下一个要处理的参数是b，依然在处理第一个元素，因此a = 1，当处理b时，下一个参数是test1，但test1不是命令行选项，所以跳过，一次下一个要处理的参数是<code>-c</code>，而<code>-c</code>参数所在的位置为3,后面几个输出的道理是一样的。</p>
</li>
</ul>
<ul>
<li><p>read命令从标准输入（键盘）或另一个文件描述符中接受输入，在受到输入后，read命令会将数据放进一个变量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">echo -n &quot;Enter your name: &quot;</div><div class="line">read name</div><div class="line">echo &quot;Hello $name, welcome&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$./test.sh</div><div class="line">Enter your name: GTP</div><div class="line">Hello GTP, welcome</div></pre></td></tr></table></figure>
<p>echo命令后面的<code>-n</code>选项表示不会在字符串末尾输出换行符，允许脚本用户紧跟其后输入数据，而不是下一行。</p>
</li>
</ul>
<ul>
<li><p>read命令包含了<code>-p</code>选项，允许直接在read命令行指定提示符：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">read -p &quot;Please enter your age: &quot; age</div><div class="line">days=$[ age * 365 ]</div><div class="line">echo &quot;That makes you over $days days old!&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ ./test.sh</div><div class="line">Please enter your age: 10</div><div class="line">That makes you over 3650 days old!</div></pre></td></tr></table></figure>
</li>
<li><p>read命令会将姓和名保存在同一个变量中，read命令会将提示符后输入的所有数据分配给单个变量，要么你指定多个变量，输入的每个数据值都会分配给变量列表中的下一个变量，如果变量数量不够，剩下的数据就全部分配给最后一个变量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">read -p &quot;Enter your name: &quot; first last</div><div class="line">echo &quot;Checking data for last, first&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ ./test.sh </div><div class="line">Enter your name: Rich Blum</div><div class="line">Checking data for Blum, Rich</div></pre></td></tr></table></figure>
</li>
<li><p>也可以在read命令中不指定变量，这样read命令会将它收到的任何数据都放进特殊环境变量REPLY中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">read -p &quot;Enter your name: &quot;</div><div class="line">echo</div><div class="line">echo Hello $REPLY, welcome!</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$./test.sh</div><div class="line">Enter your name: GTP</div><div class="line">Hello GTP, welcome!</div></pre></td></tr></table></figure>
</li>
<li><p>read命令可以通过-t选项指定一个计时器，指定了read命令等待输入的秒数，当计时器过期后，read命令会返回一个非零退出状态码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">if read -t 5 -p &quot;Please enter your name: &quot; name</div><div class="line">then </div><div class="line">    echo &quot;Hello $name, welcome!&quot;</div><div class="line">else </div><div class="line">    echo</div><div class="line">    echo &quot;Sorry, too slow!&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
</li>
<li><p>read命令还可以统计输入的字符数，当输入的字符数达到预设的字符数时，就自动退出，将输入的数据赋给变量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#!/bin/bsh</div><div class="line">read -n1 -p &quot;Do you want to continue [Y/N]? &quot; answer</div><div class="line">case $answer in</div><div class="line">Y | y) echo </div><div class="line">       echo &quot;fine, continue on...&quot; ;;</div><div class="line">N | n) echo</div><div class="line">       echo &quot;OK, goodbye&quot;</div><div class="line">       exit ;;</div><div class="line">esac</div><div class="line">echo &quot;This is the end of the script&quot;</div></pre></td></tr></table></figure>
<p><code>-n1</code>选项告诉read命令在接受单个字符后退出，只要按下单个字符回答后，read命令就会接受输入并将它传给变量，无需按回车键。</p>
</li>
</ul>
<ul>
<li><p>read命令的<code>-s</code>选项可以避免在read命令中输入的数据显示在显示器上（实际上数据会被显示，只是read命令会将文本颜色设成跟背景色一样）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">read -s -p &quot;Enter your password: &quot; pass</div><div class="line">echo </div><div class="line">echo &quot;Is your password really $pass? &quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ ./test.sh</div><div class="line">Enter your password:</div><div class="line">Is your password really T3stlng?</div></pre></td></tr></table></figure>
<p>这样输入提示符输入的数据不会出现在屏幕上，但会赋给变量。</p>
</li>
</ul>
<ul>
<li><p>read命令可以读取文件中保存的数据，每次调用read命令， 会从文件中读取一行文本，当文件中再没有内容时，read命令会退出并返回非零退出状态码，最常见的方法是对文件使用cat命令，将结果通过管道直接传给read命令的while命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">count=1</div><div class="line">cat test | while read line</div><div class="line">do</div><div class="line">    echo &quot;Line $count: $line&quot;</div><div class="line">    count=$[ $count + 1 ]</div><div class="line">done</div><div class="line">echo &quot;Finished procession the file&quot;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
</ul>

                
<p class="pink-link-context">
    <a href="/2017/12/10/[DB] mysql的最左前缀匹配原则/" rel="next" title="[DB] mysql的最左前缀匹配原则">
    上一篇：[DB] mysql的最左前缀匹配原则
  </a>
</p>



<p class="pink-link-context">
    <a href="/2017/12/03/[Linux] Shell编程第十七课/" rel="next" title="[Linux] Shell编程第十七课">
    下一篇：[Linux] Shell编程第十七课
  </a>
</p>


            </div>
			
        </div>
    </div>
</article>






</div>

        <div class="fixed-action-btn float-sitemap">
    <a class="btn-floating btn-large pink">
      <i class="fa fa-caret-square-o-up"></i>
    </a>
    <ul>
      <li><a class="btn-return-top btn-floating waves-effect green" title="回到顶部"><i class="fa fa-arrow-circle-o-up"></i></a></li>
      <li><a class="btn-floating waves-effect button-collapse yellow darken-1"  data-activates="main-menu" title="菜单"><i class="fa fa-navicon"></i></a></li>
    </ul>
  </div>

    </main>
    <footer class="page-footer indigo darken-1">
    
    <div class="footer-container container">
        <div class="row">
            
            <div class="social-group col m4 s12">
                <h5 class="white-text">社交</h5>
                
                    <a class="social-link" href="https://weibo.com/2520520192" target="_blank">
                        <i class="fa fa-2x fa-weibo"></i>
                    </a>
                
                    <a class="social-link" href="https://github.com/Glemontree" target="_blank">
                        <i class="fa fa-2x fa-github"></i>
                    </a>
                
                    <a class="social-link" href="/atom.xml" target="_blank">
                        <i class="fa fa-2x fa-rss"></i>
                    </a>
                
                
    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
    </script>
    <div class="site-visitors-container white-text">
        <span>
            <i class="fa fa-user"></i>
            <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
        </span>
        <span>&nbsp;|&nbsp;</span>
        <span>
            <i class="fa fa-eye"></i>
            <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
        </span>
    </div>


            </div>
            

            
            <div class="col m8 s12">
                <h5 class="white-text">友情链接</h5>
                
                    <a class="social-link" href="https://glemontree.github.io/" target="_blank">我的博客</a>
                
                    <a class="social-link" href="https://github.com/Glemontree" target="_blank">Github地址</a>
                
            </div>
            
        </div>
    </div>
    

    <div class="footer-copyright pink-link-context">
        <div class="container">
            © 2016 example.com, All rights reserved.
            <p class="right" style="margin-top: 0;">本博客由 <a href="https://hexo.io">Hexo</a> 强力驱动 | 主题 <a href="https://github.com/raytaylorlin/hexo-theme-raytaylorism">raytaylorism</a></p>
        </div>
    </div>
</footer>


    <noscript>
    <div class="noscript">
        <p class="center-align">当前网速较慢或者你使用的浏览器不支持博客特定功能，请尝试刷新或换用Chrome、Firefox等现代浏览器</p>
    </div>
</noscript>
<div class="noscript">
    <p class="center-align">当前网速较慢或者你使用的浏览器不支持博客特定功能，请尝试刷新或换用Chrome、Firefox等现代浏览器</p>
</div>


<script src="/js/jquery.min.js"></script>
<script src="/js/materialize.min.js"></script>

<script>
    (function($) {
        $(document).ready(function() {
            // 隐藏禁用javascript（针对微信内置浏览器）的提示
            $('.noscript').hide();

            // 图片缩放效果
            var $imgs = $('img').not('.slider-image').not('.avatar-image').not('.carousel-image').not('.card-cover-image').not('.qrcode');

            // 给图片加上点击放大效果（materialbox插件）
            $imgs.addClass('materialboxed').each(function(i, el) {
                $(this).attr('data-caption', $(this).attr('alt') || ' ');
            }).materialbox();

            // 优化表格的显示
            $('table').each(function() {
                var $table = $(this);
                // 除去多行代码的情况
                if ($table.find('pre').length == 0) {
                    $table.addClass('responsive-table striped bordered');
                }
            });

            // 首页幻灯片
            $('.slider').slider({indicators: true, full_width: true, interval: 8000});

            $(".button-collapse").sideNav();
            $(".category-menu").sideNav();

            // 针对gallery post
            $('.carousel').carousel({full_width: true});
            $('.carousel-control.prev').click(function() {
                $('.carousel').carousel('prev');
            });
            $('.carousel-control.next').click(function() {
                $('.carousel').carousel('next');
            });

            // 文章目录
            $('article').not('.simple-article').find('h1').add('h2').add('h3').add('h4').add('h5').add('h6').scrollSpy();

            // 目录随屏幕滚动（防止目录过长越过footer）
            var $toc = $('.toc');
            var scrollTargetTop = 0;
            $(window).scroll(function() {
                var $activeLink = $toc.find('a.active.section');
                if ($(window).scrollTop() < 100) {
                    scrollTargetTop = 0;
                } else {
                    if ($activeLink[0]) {
                        scrollTargetTop = $activeLink.offset().top - $toc.offset().top;
                    }
                }
                $toc.css('top', '-' + scrollTargetTop + 'px');
            });

            // 修正文章目录的left-border颜色
            var color = $('.table-of-contents-text').css('color');
            $('.table-of-contents-link').css('border-left-color', color);

            // 针对移动端做的优化：FAB按钮点击一下收回
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                $('.fixed-action-btn').addClass('click-to-toggle');
            }
            // 回到顶部
            $('.btn-return-top').click(function() {
                $('body, html').animate({
                    scrollTop: 0
                }, 500);
            });

            // 重置读书页面的Tab标签页的颜色
            $('li.tab a').hover(function() {
                $(this).toggleClass('text-lighten-4');
            });
            $('.indicator').addClass('pink lighten-2');

            
            // 添加new标签
            $('.menu-reading, .menu-about').append('<span class="new badge pink"></span>');
            

            // 搜索功能
            $('.modal-trigger').leanModal({
                // 打开搜索框时自动聚焦
                ready: function() {
                    if ($('#search').is(":visible")) {
                        $('#search-input').focus();
                    }
                }
            });
            var searchXml = "search.xml";
            if (searchXml.length == 0) {
             	searchXml = "search.xml";
            }
            var searchPath = "/" + searchXml;
            initSearch(searchPath, 'search-input', 'search-result');
        });

        // 初始化搜索与匹配函数
        var initSearch = function(path, search_id, content_id) {
            'use strict';
            $.ajax({
                url: path,
                dataType: "xml",
                success: function(xmlResponse) {
                    // get the contents from search data
                    var datas = $("entry", xmlResponse).map(function() {
                        return {
                            title: $("title", this).text(),
                            content: $("content", this).text(),
                            url: $("url", this).text()
                        };
                    }).get();
                    var $input = document.getElementById(search_id);
                    var $resultContent = document.getElementById(content_id);
                    $input.addEventListener('input', function() {
                        var str = '<ul class=\"search-result-list\">';
                        var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                        $resultContent.innerHTML = "";
                        if (this.value.trim().length <= 0) {
                            return;
                        }
                        // perform local searching
                        datas.forEach(function(data) {
                            var isMatch = true;
                            var content_index = [];
                            var data_title = data.title.trim().toLowerCase();
                            var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                            var data_url = data.url;
                            var index_title = -1;
                            var index_content = -1;
                            var first_occur = -1;
                            // only match artiles with not empty titles and contents
                            if (data_title != '' && data_content != '') {
                                keywords.forEach(function(keyword, i) {
                                    index_title = data_title.indexOf(keyword);
                                    index_content = data_content.indexOf(keyword);
                                    if (index_title < 0 && index_content < 0) {
                                        isMatch = false;
                                    } else {
                                        if (index_content < 0) {
                                            index_content = 0;
                                        }
                                        if (i == 0) {
                                            first_occur = index_content;
                                        }
                                    }
                                });
                            }
                            // show search results
                            if (isMatch) {
                                keywords.forEach(function(keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    data_title = data_title.replace(regS, "<span class=\"search-keyword pink lighten-2\">" + keyword + "</span>");
                                });

                                str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                                var content = data.content.trim().replace(/<[^>]+>/g, "");
                                if (first_occur >= 0) {
                                    // cut out 100 characters
                                    var start = first_occur - 20;
                                    var end = first_occur + 80;
                                    if (start < 0) {
                                        start = 0;
                                    }
                                    if (start == 0) {
                                        end = 100;
                                    }
                                    if (end > content.length) {
                                        end = content.length;
                                    }
                                    var match_content = content.substring(start, end);
                                    // highlight all keywords
                                    keywords.forEach(function(keyword) {
                                        var regS = new RegExp(keyword, "gi");
                                        match_content = match_content.replace(regS, "<span class=\"search-keyword pink lighten-2\">" + keyword + "</span>");
                                    });

                                    str += "<p class=\"search-result\">..." + match_content + "...</p>"
                                }
                                str += "</li>";
                            }
                        });
                        str += "</ul>";
                        $resultContent.innerHTML = str;
                    });
                }
            });
        }
    })(jQuery);
</script>


<script src="/js/prettify.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("pre").addClass("prettyprint");
        prettyPrint();
    });
</script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script type="text/javascript" async
  src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>



</body>
</html>
